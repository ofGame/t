<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>双爆配平器</title><script src="https://cdn.tailwindcss.com"></script><script>tailwind.config={darkMode:"class",theme:{extend:{colors:{primary:"#3B82F6",secondary:"#10B981",accent:"#8B5CF6",neutral:"#1F2937","neutral-light":"#F3F4F6"},animation:{"fade-in":"rise 0.5s ease-out forwards"},keyframes:{rise:{"0%":{opacity:"0",transform:"translateY(10px)"},"100%":{opacity:"1",transform:"translateY(0)"}}}}}}</script><style type="text/tailwindcss">@layer utilities {
        .bg-base { @apply bg-neutral-light dark:bg-neutral/80 dark:text-white }
        .input-focus { @apply focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-300 }
        .btn { @apply rounded-lg hover:scale-105 transform transition-all duration-300 }
        .btn-bold { @apply btn font-bold py-2 px-4 text-white }
    }
    @layer components {
        .card { @apply bg-white rounded-xl p-6 mb-8 shadow-lg shadow-primary/10 hover:shadow-xl hover:shadow-primary/15 dark:bg-neutral/80 }
        .section-header { @apply text-xl font-semibold mb-4 }
        .form-control { @apply bg-base rounded-lg text-sm border border-gray-300 }
        .form-label { @apply block text-sm text-gray-500 mb-1 }
        .form-input { @apply form-control w-full input-focus appearance-none py-2 px-4 }
        .btn-theme { @apply btn form-control font-medium py-1 px-2 text-gray-400 float-right hover:text-white hover:bg-neutral/80 }
        .btn-primary { @apply btn-bold bg-primary hover:bg-primary/90 }
        .btn-secondary { @apply btn-bold bg-secondary hover:bg-secondary/90 }
        .btn-accent { @apply btn-bold bg-accent hover:bg-accent/90 }
    }</style></head><body><div id="app" class="bg-base"><div class="container mx-auto py-6 px-4 max-w-3xl"><main><section class="card"><div class="mb-2"><h2 class="section-header">基础属性输入 <button id="themeToggle" class="btn-theme">主题</button></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><div class="mb-4"><label for="EntryW" class="form-label">角色基础攻击（白值）</label> <input type="number" id="EntryW" class="form-input" placeholder="请输入角色基础攻击"></div><div class="mb-4"><label for="EntryG" class="form-label">角色攻击提升值（绿值）</label> <input type="number" id="EntryG" class="form-input" placeholder="请输入角色攻击提升值"></div><div class="mb-4"><label for="ClaimA" class="form-label">伤害模型转换</label> <select id="ClaimA" class="form-input"><option value="1">攻击</option><option value="1">生命</option><option value="1.25">防御</option><option value="400" disabled="disabled">精通</option></select></div></div><div><div class="mb-4"><label for="EntryB" class="form-label">暴击率 %</label> <input type="number" id="EntryB" class="form-input" placeholder="请输入暴击率"></div><div class="mb-4"><label for="EntryC" class="form-label">暴击伤害 %</label> <input type="number" id="EntryC" class="form-input" placeholder="请输入暴击伤害"></div><div class="mb-4"><p class="form-label">测试</p><div class="flex justify-between"><button id="randomBtn" class="btn-secondary">随机生成数值</button> <button id="clearBtn" class="btn-accent">清空</button></div></div></div></div></div><div class="flex justify-center"><button id="calculateBtn" class="btn-primary">计算属性分配</button></div></section><section class="card"><div id="resultsContainer" class="mb-8"><h2 class="section-header">计算结果</h2><div class="bg-base form-control p-6"><ul id="ResultsList" class="space-y-3 transition"></ul></div></div><h2 class="section-header">乘区计算</h2><a href="https://homdgcat.wiki/gi/formulae" class="font-bold text-primary hover:text-accent">玉衡杯-公式大全</a></section></main><aside></aside><footer class="text-center mt-8 text-gray-400 text-sm"><p>contact©原神UID 226115372</p></footer></div></div><script>const inputFields=[{id:"EntryW",base:500,labelKey:"基础"},{id:"EntryG",base:1e3,labelKey:"提升值"},{id:"EntryB",base:50},{id:"EntryC",base:100}],elements={list:document.getElementById("ResultsList"),claimA:document.getElementById("ClaimA"),randomBtn:document.getElementById("randomBtn"),clearBtn:document.getElementById("clearBtn"),calculateBtn:document.getElementById("calculateBtn"),themeToggle:document.getElementById("themeToggle"),body:document.body,...inputFields.reduce((e,t)=>(e[t.id]=document.getElementById(t.id),t.labelKey&&(e[`label${t.id}`]=document.querySelector(`label[for="${t.id}"]`)),e),{})},CONSTANTS={CLAIM_B:.038875,CLAIM_C:.07775,CLAIM_A:.0583125},calculatePercentage=e=>(100*e).toFixed(1),handleAnimationEnd=function(){elements.list.classList.remove("animate-fade-in"),elements.list.removeEventListener("animationend",handleAnimationEnd)},updateResultsList=e=>{elements.list.innerHTML="";const t=document.createDocumentFragment();e.forEach(e=>{const n=document.createElement("li");n.className="flex "+(e.customClass?`${e.customClass} font-bold`:""),n.append(Object.assign(document.createElement("span"),{className:"w-1/3",textContent:e.label}),Object.assign(document.createElement("span"),{className:"flex-1",textContent:e.value})),t.appendChild(n)}),elements.list.appendChild(t),elements.list.classList.remove("animate-fade-in"),requestAnimationFrame(()=>{elements.list.addEventListener("animationend",handleAnimationEnd),elements.list.classList.add("animate-fade-in")})},getInputValues=()=>inputFields.reduce((e,t)=>(e[t.id]=parseFloat(elements[t.id].value)||0,e),{});function calculateStats(){const{EntryW:e,EntryG:t,EntryB:n,EntryC:l}=getInputValues(),a=elements.claimA.value*CONSTANTS.CLAIM_A,s=elements.claimA.options[elements.claimA.selectedIndex].text,i=n/CONSTANTS.CLAIM_B/100+l/CONSTANTS.CLAIM_C/100+t/e/a,d=Math.sqrt(6)/CONSTANTS.CLAIM_B-1/a;let c,o,m,u;if(i>7/CONSTANTS.CLAIM_C-1/a)c=2/CONSTANTS.CLAIM_C,o=(i+1/a-3/CONSTANTS.CLAIM_C)/2,m=(i-1/a-1/CONSTANTS.CLAIM_C)/2,u={text:"大毕业",class:"text-green-600"};else if(i>d){const e=i+1/a;c=(e+Math.sqrt(Math.pow(e,2)-6/Math.pow(CONSTANTS.CLAIM_B,2)))/6,o=c,m=i-2*c,u={text:"小毕业",class:"text-yellow-600"}}else c=.05/CONSTANTS.CLAIM_B,o=.5/CONSTANTS.CLAIM_C,m=i-c-o,u={text:"不需要双爆",class:"text-red-600"};const r=a*m,C=CONSTANTS.CLAIM_B*c,A=CONSTANTS.CLAIM_C*o,E=Math.round((r+1)*e),L=(E*(1+C*A)).toFixed(2),h=[{label:"综合评分:",value:i.toFixed(2)},{label:`${s}加成:`,value:`${calculatePercentage(r)}%`},{label:`总${s}:`,value:E},{label:"暴击率:",value:`${calculatePercentage(C)}%`},{label:"暴击伤害:",value:`${calculatePercentage(A)}%`},{label:"总期望:",value:L},{label:"评价:",value:u.text,customClass:u.class}];updateResultsList(h)}function getRandomValue(e){return Math.ceil((Math.random()+1)*e)}function generateRandomNumbers(){inputFields.forEach(e=>{elements[e.id].value=getRandomValue(e.base)}),calculateStats()}function clearInputValues(){inputFields.forEach(e=>{elements[e.id].value=""}),handleInputFocus()}function handleInputFocus(){elements.list.innerHTML="",window.scrollTo({top:0,behavior:"smooth"})}function initEventListeners(){"dark"===localStorage.getItem("theme")&&elements.body.classList.add("dark"),elements.themeToggle.addEventListener("click",()=>{elements.body.classList.toggle("dark"),localStorage.setItem("theme",elements.body.classList.contains("dark")?"dark":"light")}),inputFields.forEach(e=>{elements[e.id].addEventListener("focus",handleInputFocus)}),elements.claimA.addEventListener("focus",handleInputFocus),elements.randomBtn.addEventListener("click",generateRandomNumbers),elements.clearBtn.addEventListener("click",clearInputValues),elements.calculateBtn.addEventListener("click",()=>{calculateStats(),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),elements.claimA.addEventListener("change",function(){const e=this.options[this.selectedIndex].text;inputFields.filter(e=>e.labelKey).forEach(t=>{elements[`label${t.id}`].textContent=`角色${t.labelKey}${e}（${"EntryW"===t.id?"白":"绿"}值）`,elements[t.id].placeholder=`请输入角色${t.labelKey}${e}`})}),elements.claimA.dispatchEvent(new Event("change"))}document.addEventListener("DOMContentLoaded",initEventListeners)</script></body></html>